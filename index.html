<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ilmu Lebih Mahal Bos ðŸ˜†</title>
<style>
  :root{--bg:#f7fbff;--card:#ffffff;--muted:#64748b;--accent:#3b82f6}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#e6f0ff,#f7fbff);font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;color:#0b2540;display:flex;align-items:center;justify-content:center;padding:20px}
  .card{width:100%;max-width:600px;background:var(--card);border-radius:14px;padding:18px;box-shadow:0 12px 40px rgba(3,10,25,.08);position:relative;overflow:hidden}
  .head{display:flex;gap:12px;align-items:center}
  .photo{width:110px;height:110px;border-radius:12px;overflow:hidden;background:#eee;border:4px solid rgba(3,10,25,.03);box-shadow:0 8px 24px rgba(3,10,25,.06);opacity:0;transform:translateY(8px) scale(.98);transition:all .7s cubic-bezier(.2,.9,.25,1)}
  .photo img{width:100%;height:100%;object-fit:cover;display:block}
  .meta{flex:1}
  .title{font-weight:800;font-size:18px;margin:0 0 6px}
  .desc{font-size:13px;color:var(--muted);margin:0}
  .progressWrap{margin-top:12px}
  .bar{height:12px;background:#eef6ff;border-radius:999px;overflow:hidden}
  .prog{height:100%;width:0;background:linear-gradient(90deg,var(--accent),#7dd3fc);transition:width .2s linear}
  .controls{display:flex;gap:8px;align-items:center;margin-top:10px}
  .btn{padding:8px 12px;border-radius:10px;background:#fff;border:1px solid rgba(3,10,25,.06);cursor:pointer;font-weight:700}
  .reveal{margin-top:18px;min-height:150px;display:flex;flex-direction:column;align-items:center;justify-content:center}
  .line{font-weight:800;font-size:20px;text-align:center;line-height:1.25;opacity:0;transform:translateY(8px);transition:all .35s ease}
  .typed{border-right:2px solid #06203a;padding-right:4px;animation:blink .9s step-end infinite}
  @keyframes blink{50%{border-color:transparent}}
  .shake{animation:shake .45s ease-in-out}
  @keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}
  canvas{position:fixed;left:0;top:0;pointer-events:none;z-index:9999}
  .small{font-size:13px;color:var(--muted);margin-top:10px}
  @media (max-width:480px){.photo{width:88px;height:88px}.line{font-size:17px}}
</style>
</head>
<body>
<div class="card" role="main" aria-live="polite">
  <div class="head">
    <div class="photo" id="photoWrap">
      <!-- Ganti src sesuai nama file/URL gambarmu -->
      <img id="photo" src="gambar_kamu.jpg" alt="Foto">
    </div>
    <div class="meta">
      <div class="title">Notifikasi Sistem â€” Memeriksa</div>
      <div class="desc" id="statusDesc">Sedang memproses paket intelijenâ€¦</div>
      <div class="progressWrap" aria-hidden="true">
        <div class="bar"><div id="prog" class="prog"></div></div>
      </div>
      <div class="controls">
        <button id="force" class="btn">Percepat</button>
        <button id="share" class="btn">Bagikan</button>
      </div>
    </div>
  </div>

  <div class="reveal" id="reveal" aria-hidden="true">
    <div id="l1" class="line"></div>
    <div id="l2" class="line"></div>
    <div id="l3" class="line"></div>
    <div class="small">Tekan Bagikan jika ingin menyebarkan â€” prank ringan ðŸ¤­</div>
  </div>
</div>

<canvas id="cf"></canvas>

<script>
/* ===========================
   Config teks prank
   =========================== */
const lines = [
  "Wkwkwkâ€¦ enak ya tinggal pakai ðŸ˜†",
  "Padahal yang bikin sampai kopi tiga gelas belum kelar.",
  "Nag lemak buat dewek, ilmu lebih mahal bos!"
];

/* ====== Element refs ====== */
const photoWrap = document.getElementById('photoWrap');
const prog = document.getElementById('prog');
const statusDesc = document.getElementById('statusDesc');
const reveal = document.getElementById('reveal');
const l1 = document.getElementById('l1'), l2 = document.getElementById('l2'), l3 = document.getElementById('l3');
const force = document.getElementById('force'), share = document.getElementById('share');

/* ====== Photo appear ====== */
window.addEventListener('load', ()=> {
  setTimeout(()=> {
    photoWrap.style.opacity = 1;
    photoWrap.style.transform = 'translateY(0) scale(1)';
  }, 180);
});

/* ====== Loader + beep sound using WebAudio ====== */
let percent = 0;
let running = true;
const ctx = new (window.AudioContext || window.webkitAudioContext)();

function beep(frequency=880, time=0.06, vol=0.05){
  if (!ctx) return;
  const o = ctx.createOscillator();
  const g = ctx.createGain();
  o.type = 'sine';
  o.frequency.value = frequency;
  g.gain.value = vol;
  o.connect(g); g.connect(ctx.destination);
  o.start();
  o.stop(ctx.currentTime + time);
}

/* simulate progressive load with random steps and beep each step */
const loader = setInterval(()=>{
  if (!running) return;
  const step = Math.floor(Math.random()*14)+6;
  percent += step;
  if (percent > 100) percent = 100;
  prog.style.width = percent + "%";
  // beep pitch depends on percent
  const freq = 400 + Math.floor(percent * 4);
  beep(freq, 0.04, 0.045);

  if (percent >= 100) {
    clearInterval(loader);
    running = false;
    onFinish();
  }
}, 600);

/* force button */
force.addEventListener('click', ()=> {
  if (running) {
    percent = 100;
    prog.style.width = '100%';
    clearInterval(loader);
    running = false;
    beep(1200,0.08,0.06);
    onFinish();
  }
});

/* share button behavior */
share.addEventListener('click', ()=> {
  const txt = lines.join(' â€¢ ');
  if (navigator.share) {
    navigator.share({title:'Cek ini nih', text: txt, url: location.href}).catch(()=>{ prompt('Salin link ini:', location.href); });
  } else {
    prompt('Salin link ini untuk dibagikan:', location.href);
  }
});

/* ===== typing effect + final effects ===== */
function typeText(el, text, delay=35){
  return new Promise(res=>{
    el.textContent = '';
    el.style.opacity = 1;
    el.classList.add('typed');
    let i=0;
    const t = setInterval(()=> {
      el.textContent += text.charAt(i);
      i++;
      if (i >= text.length) {
        clearInterval(t);
        el.classList.remove('typed');
        setTimeout(res, 300);
      }
    }, delay);
  });
}

async function onFinish(){
  statusDesc.textContent = 'Selesai. Menyusun pesan...';
  reveal.setAttribute('aria-hidden','false');

  await wait(450);
  await typeText(l1, lines[0], 45);
  await wait(240);
  await typeText(l2, lines[1], 30);
  await wait(240);
  await typeText(l3, lines[2], 28);

  triggerShake();
  speakThenLaugh();
  startConfetti();
}

/* ===== helpers ===== */
function wait(ms){ return new Promise(r=>setTimeout(r,ms)); }

function triggerShake(){
  const card = document.querySelector('.card');
  card.classList.add('shake');
  setTimeout(()=> card.classList.remove('shake'), 700);
  if (navigator.vibrate) navigator.vibrate([50,30,50]);
}

/* use speechSynthesis then small laugh beep sequence if not supported */
function speakThenLaugh(){
  const text = lines.join(' ... ');
  if ('speechSynthesis' in window){
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = 'id-ID';
    u.rate = 0.95;
    u.pitch = 1.02;
    window.speechSynthesis.speak(u);
    // schedule laugh after estimated time
    const estimate = Math.max(1400, text.length * 45);
    setTimeout(()=> {
      // fun laugh using speech or beep fallback
      if ('speechSynthesis' in window){
        const laugh = new SpeechSynthesisUtterance('Wkwkwkwk');
        laugh.lang = 'id-ID'; laugh.rate = 1.25; laugh.pitch = 1.35;
        window.speechSynthesis.speak(laugh);
      } else {
        beep(900,0.08,0.07);
        setTimeout(()=>beep(1100,0.06,0.06),150);
      }
    }, estimate + 200);
  } else {
    // fallback beeps
    beep(800,0.06,0.06);
    setTimeout(()=>beep(1000,0.06,0.06),350);
  }
}

/* ===== simple confetti ===== */
function startConfetti(){
  const canvas = document.getElementById('cf');
  canvas.width = innerWidth; canvas.height = innerHeight;
  const ctx2 = canvas.getContext('2d');
  const pieces = [];
  const colors = ['#ef4444','#f97316','#10b981','#3b82f6','#a78bfa','#fb7185'];
  for (let i=0;i<140;i++){
    pieces.push({
      x: Math.random()*canvas.width,
      y: Math.random()*-canvas.height,
      w: Math.random()*8+6,
      h: Math.random()*4+3,
      dx: Math.random()*2-1,
      dy: Math.random()*3+2,
      rot: Math.random()*360,
      color: colors[Math.floor(Math.random()*colors.length)]
    });
  }
  let raf;
  function draw(){
    ctx2.clearRect(0,0,canvas.width,canvas.height);
    for(const p of pieces){
      p.x += p.dx; p.y += p.dy; p.rot += p.dx*4;
      ctx2.save();
      ctx2.translate(p.x,p.y);
      ctx2.rotate(p.rot*Math.PI/180);
      ctx2.fillStyle = p.color;
      ctx2.fillRect(-p.w/2,-p.h/2,p.w,p.h);
      ctx2.restore();
      if (p.y > canvas.height + 20){
        p.y = -10 - Math.random()*canvas.height;
        p.x = Math.random()*canvas.width;
      }
    }
    raf = requestAnimationFrame(draw);
  }
  draw();
  setTimeout(()=>{ cancelAnimationFrame(raf); canvas.remove(); }, 7000);
}

/* ===== ensure audio context unlock on user interaction (mobile) ===== */
document.addEventListener('click', function unlock() {
  if (ctx && ctx.state === 'suspended') ctx.resume();
  document.removeEventListener('click', unlock);
});
</script>
</body>
</html>
